<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="etwfe - Extended Two-Way Fixed Effects for Python">
  <meta name="author" content="Armand Kapllani">
  <title>etwfe | Extended Two-Way Fixed Effects for Python</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,wght@0,400;0,500;0,600;1,400&family=Source+Sans+3:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --color-ink: #1c1c1c;
      --color-ink-secondary: #3d3d3d;
      --color-ink-muted: #6b6b6b;
      --color-bg: #ffffff;
      --color-bg-subtle: #f8f8f8;
      --color-border: #e0e0e0;
      --color-accent: #2c5282;
      --color-accent-hover: #1e3a5f;
      --color-accent-light: #ebf4ff;
      --color-success: #059669;
      --color-warning: #d97706;
      --font-serif: 'Source Serif 4', Georgia, serif;
      --font-sans: 'Source Sans 3', -apple-system, BlinkMacSystemFont, sans-serif;
      --font-mono: 'JetBrains Mono', 'Fira Code', monospace;
      --max-width: 1000px;
      --spacing: 8px;
      
      /* Code colors - Catppuccin Mocha */
      --code-bg: #1e1e2e;
      --code-text: #cdd6f4;
      --code-comment: #6c7086;
      --code-keyword: #cba6f7;
      --code-string: #a6e3a1;
      --code-function: #89b4fa;
      --code-number: #fab387;
      --code-operator: #89dceb;
      --code-variable: #f5e0dc;
      --code-class: #f9e2af;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: var(--font-sans);
      font-size: 16px;
      line-height: 1.7;
      color: var(--color-ink);
      background: var(--color-bg);
      -webkit-font-smoothing: antialiased;
    }

    ::selection {
      background: var(--color-accent);
      color: white;
    }

    a {
      color: var(--color-accent);
      text-decoration: none;
      transition: color 0.2s ease;
    }

    a:hover {
      color: var(--color-accent-hover);
    }

    /* Navigation */
    nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: rgba(255, 255, 255, 0.97);
      border-bottom: 1px solid var(--color-border);
      z-index: 1000;
      backdrop-filter: blur(8px);
    }

    .nav-container {
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 0 calc(var(--spacing) * 4);
      display: flex;
      justify-content: space-between;
      align-items: center;
      height: 60px;
    }

    .nav-logo {
      font-family: var(--font-serif);
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--color-ink);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: calc(var(--spacing) * 1.5);
    }

    .nav-logo-icon {
      width: 32px;
      height: 32px;
      background: linear-gradient(135deg, var(--color-accent), #4a7ab8);
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .nav-logo-icon svg {
      width: 18px;
      height: 18px;
      color: white;
    }

    .nav-links {
      display: flex;
      gap: calc(var(--spacing) * 3);
      list-style: none;
      align-items: center;
    }

    .nav-links a {
      color: var(--color-ink-muted);
      text-decoration: none;
      font-size: 0.875rem;
      font-weight: 500;
      transition: color 0.2s ease;
    }

    .nav-links a:hover {
      color: var(--color-ink);
    }

    .nav-btn {
      background: var(--color-accent);
      color: white !important;
      padding: 8px 16px;
      border-radius: 6px;
      font-weight: 500;
      transition: background 0.2s ease;
    }

    .nav-btn:hover {
      background: var(--color-accent-hover);
      color: white !important;
    }

    /* Main Container */
    .container {
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 0 calc(var(--spacing) * 4);
    }

    /* Hero Section */
    .hero {
      padding-top: calc(var(--spacing) * 14);
      padding-bottom: calc(var(--spacing) * 8);
      text-align: center;
      border-bottom: 1px solid var(--color-border);
    }

    .hero-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: var(--color-accent-light);
      color: var(--color-accent);
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 0.8125rem;
      font-weight: 500;
      margin-bottom: calc(var(--spacing) * 3);
    }

    .hero-title {
      font-family: var(--font-mono);
      font-size: 3rem;
      font-weight: 600;
      color: var(--color-ink);
      margin-bottom: calc(var(--spacing) * 2);
    }

    .hero-subtitle {
      font-size: 1.25rem;
      color: var(--color-ink-secondary);
      max-width: 700px;
      margin: 0 auto calc(var(--spacing) * 4);
      line-height: 1.6;
    }

    .hero-badges {
      display: flex;
      justify-content: center;
      gap: calc(var(--spacing) * 2);
      margin-bottom: calc(var(--spacing) * 4);
      flex-wrap: wrap;
    }

    .hero-badges img {
      height: 22px;
    }

    .hero-install {
      background: var(--code-bg);
      border-radius: 10px;
      padding: calc(var(--spacing) * 2) calc(var(--spacing) * 4);
      display: inline-flex;
      align-items: center;
      gap: calc(var(--spacing) * 3);
      margin-bottom: calc(var(--spacing) * 4);
    }

    .hero-install code {
      font-family: var(--font-mono);
      font-size: 1rem;
      color: var(--code-text);
    }

    .hero-install .dollar {
      color: var(--code-comment);
    }

    .copy-btn {
      background: rgba(255,255,255,0.1);
      color: var(--code-text);
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      font-size: 0.8125rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .copy-btn:hover {
      background: rgba(255,255,255,0.2);
    }

    .copy-btn svg {
      width: 14px;
      height: 14px;
    }

    .hero-links {
      display: flex;
      justify-content: center;
      gap: calc(var(--spacing) * 2);
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 24px;
      border-radius: 8px;
      font-weight: 500;
      font-size: 0.9375rem;
      transition: all 0.2s ease;
    }

    .btn-primary {
      background: var(--color-accent);
      color: white;
    }

    .btn-primary:hover {
      background: var(--color-accent-hover);
      color: white;
    }

    .btn-secondary {
      background: var(--color-bg-subtle);
      color: var(--color-ink);
      border: 1px solid var(--color-border);
    }

    .btn-secondary:hover {
      background: var(--color-border);
      color: var(--color-ink);
    }

    .btn svg {
      width: 18px;
      height: 18px;
    }

    /* TOC Sidebar */
    .page-layout {
      display: grid;
      grid-template-columns: 220px 1fr;
      gap: calc(var(--spacing) * 6);
      padding: calc(var(--spacing) * 6) 0;
    }

    .toc {
      position: sticky;
      top: 80px;
      height: fit-content;
    }

    .toc-title {
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--color-ink-muted);
      margin-bottom: calc(var(--spacing) * 2);
    }

    .toc-list {
      list-style: none;
    }

    .toc-list li {
      margin-bottom: calc(var(--spacing) * 1);
    }

    .toc-list a {
      font-size: 0.875rem;
      color: var(--color-ink-muted);
      display: block;
      padding: 4px 0;
      border-left: 2px solid transparent;
      padding-left: 12px;
      margin-left: -12px;
      transition: all 0.2s ease;
    }

    .toc-list a:hover,
    .toc-list a.active {
      color: var(--color-accent);
      border-left-color: var(--color-accent);
    }

    .toc-list .toc-sub {
      padding-left: 16px;
    }

    .toc-list .toc-sub a {
      font-size: 0.8125rem;
    }

    /* Content */
    .content {
      min-width: 0;
    }

    .section {
      margin-bottom: calc(var(--spacing) * 8);
      scroll-margin-top: 80px;
    }

    .section-title {
      font-family: var(--font-serif);
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--color-ink);
      margin-bottom: calc(var(--spacing) * 2);
      padding-bottom: calc(var(--spacing) * 2);
      border-bottom: 1px solid var(--color-border);
    }

    .section-intro {
      font-size: 1rem;
      color: var(--color-ink-secondary);
      margin-bottom: calc(var(--spacing) * 4);
      line-height: 1.8;
    }

    .subsection {
      margin-bottom: calc(var(--spacing) * 6);
    }

    .subsection-title {
      font-family: var(--font-serif);
      font-size: 1.125rem;
      font-weight: 600;
      color: var(--color-ink);
      margin-bottom: calc(var(--spacing) * 2);
      display: flex;
      align-items: center;
      gap: calc(var(--spacing) * 1.5);
    }

    .step-badge {
      width: 28px;
      height: 28px;
      background: var(--color-accent);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8125rem;
      font-weight: 600;
      font-family: var(--font-sans);
      flex-shrink: 0;
    }

    .description {
      font-size: 0.9375rem;
      color: var(--color-ink-secondary);
      margin-bottom: calc(var(--spacing) * 2);
      line-height: 1.75;
    }

    /* Code Blocks */
    .code-block {
      background: var(--code-bg);
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: calc(var(--spacing) * 2);
    }

    .code-header {
      background: rgba(255,255,255,0.05);
      padding: calc(var(--spacing) * 1.5) calc(var(--spacing) * 2.5);
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .code-lang {
      font-family: var(--font-mono);
      font-size: 0.75rem;
      color: var(--code-comment);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .code-filename {
      font-family: var(--font-mono);
      font-size: 0.75rem;
      color: var(--code-text);
      opacity: 0.7;
    }

    .code-copy {
      background: rgba(255,255,255,0.1);
      border: none;
      color: var(--code-text);
      padding: 6px 12px;
      border-radius: 4px;
      font-size: 0.75rem;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .code-copy:hover {
      background: rgba(255,255,255,0.2);
    }

    .code-copy svg {
      width: 12px;
      height: 12px;
    }

    pre {
      margin: 0;
      padding: calc(var(--spacing) * 2.5);
      overflow-x: auto;
    }

    pre code {
      font-family: var(--font-mono);
      font-size: 0.8125rem;
      line-height: 1.7;
      color: var(--code-text);
    }

    /* Syntax highlighting */
    .kw { color: var(--code-keyword); }
    .str { color: var(--code-string); }
    .fn { color: var(--code-function); }
    .num { color: var(--code-number); }
    .cm { color: var(--code-comment); font-style: italic; }
    .op { color: var(--code-operator); }
    .var { color: var(--code-variable); }
    .cls { color: var(--code-class); }

    /* Output Block */
    .output-block {
      background: #fafafa;
      border: 1px solid var(--color-border);
      border-radius: 8px;
      margin-top: -8px;
      margin-bottom: calc(var(--spacing) * 3);
      overflow: hidden;
    }

    .output-header {
      background: #f0f0f0;
      padding: calc(var(--spacing) * 1) calc(var(--spacing) * 2);
      border-bottom: 1px solid var(--color-border);
      font-size: 0.6875rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--color-ink-muted);
    }

    .output-content {
      padding: calc(var(--spacing) * 2);
      font-family: var(--font-mono);
      font-size: 0.75rem;
      color: var(--color-ink-secondary);
      overflow-x: auto;
      white-space: pre;
      line-height: 1.6;
    }

    /* Table Output */
    .output-table {
      width: 100%;
      border-collapse: collapse;
      font-family: var(--font-mono);
      font-size: 0.75rem;
    }

    .output-table th {
      text-align: left;
      padding: 8px 12px;
      background: #f5f5f5;
      border-bottom: 2px solid var(--color-border);
      font-weight: 600;
      color: var(--color-ink);
    }

    .output-table td {
      padding: 8px 12px;
      border-bottom: 1px solid var(--color-border);
      color: var(--color-ink-secondary);
    }

    .output-table tr:last-child td {
      border-bottom: none;
    }

    .output-table tr:hover td {
      background: #f9f9f9;
    }

    .output-table .num {
      text-align: right;
      font-variant-numeric: tabular-nums;
    }

    /* Features Grid */
    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: calc(var(--spacing) * 2);
      margin-bottom: calc(var(--spacing) * 4);
    }

    .feature-card {
      background: var(--color-bg-subtle);
      border: 1px solid var(--color-border);
      border-radius: 10px;
      padding: calc(var(--spacing) * 2.5);
      transition: all 0.2s ease;
    }

    .feature-card:hover {
      border-color: var(--color-accent);
      box-shadow: 0 4px 20px rgba(44, 82, 130, 0.1);
    }

    .feature-icon {
      width: 36px;
      height: 36px;
      background: linear-gradient(135deg, var(--color-accent), #4a7ab8);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: calc(var(--spacing) * 1.5);
    }

    .feature-icon svg {
      width: 20px;
      height: 20px;
      color: white;
    }

    .feature-title {
      font-weight: 600;
      color: var(--color-ink);
      margin-bottom: calc(var(--spacing) * 0.5);
      font-size: 0.875rem;
    }

    .feature-desc {
      font-size: 0.75rem;
      color: var(--color-ink-muted);
      line-height: 1.5;
    }

    /* Info Box */
    .info-box {
      background: var(--color-accent-light);
      border-left: 4px solid var(--color-accent);
      padding: calc(var(--spacing) * 2) calc(var(--spacing) * 3);
      border-radius: 0 8px 8px 0;
      margin-bottom: calc(var(--spacing) * 3);
    }

    .info-box p {
      font-size: 0.875rem;
      color: var(--color-accent-hover);
      margin: 0;
    }

    .info-box code {
      background: rgba(44, 82, 130, 0.1);
      padding: 2px 6px;
      border-radius: 4px;
      font-family: var(--font-mono);
      font-size: 0.8125rem;
    }

    /* Parameter Table */
    .param-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: calc(var(--spacing) * 3);
      font-size: 0.875rem;
    }

    .param-table th {
      text-align: left;
      padding: 12px;
      background: var(--color-bg-subtle);
      border: 1px solid var(--color-border);
      font-weight: 600;
    }

    .param-table td {
      padding: 12px;
      border: 1px solid var(--color-border);
      vertical-align: top;
    }

    .param-table code {
      background: var(--color-bg-subtle);
      padding: 2px 6px;
      border-radius: 4px;
      font-family: var(--font-mono);
      font-size: 0.8125rem;
      color: var(--color-accent);
    }

    .param-table .param-name {
      font-family: var(--font-mono);
      font-weight: 500;
      color: var(--color-ink);
    }

    .param-table .param-type {
      color: var(--color-ink-muted);
      font-size: 0.75rem;
    }

    /* Quick Ref */
    .quick-ref {
      background: var(--color-bg-subtle);
      border: 1px solid var(--color-border);
      border-radius: 10px;
      padding: calc(var(--spacing) * 3);
    }

    .quick-ref-title {
      font-weight: 600;
      margin-bottom: calc(var(--spacing) * 2);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .quick-ref-title svg {
      width: 18px;
      height: 18px;
      color: var(--color-accent);
    }

    .quick-ref-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: calc(var(--spacing) * 2);
    }

    .quick-ref-item h4 {
      font-size: 0.8125rem;
      font-weight: 600;
      color: var(--color-ink);
      margin-bottom: calc(var(--spacing) * 1);
    }

    .quick-ref-item code {
      display: block;
      font-family: var(--font-mono);
      font-size: 0.75rem;
      background: white;
      border: 1px solid var(--color-border);
      padding: 6px 10px;
      border-radius: 4px;
      color: var(--color-ink-secondary);
      margin-bottom: 4px;
    }

    .quick-ref-item p {
      font-size: 0.6875rem;
      color: var(--color-ink-muted);
      margin-bottom: 8px;
    }

    /* Footer */
    footer {
      border-top: 1px solid var(--color-border);
      padding: calc(var(--spacing) * 4) 0;
      text-align: center;
      margin-top: calc(var(--spacing) * 8);
    }

    .footer-text {
      font-size: 0.8125rem;
      color: var(--color-ink-muted);
    }

    /* Responsive */
    @media (max-width: 800px) {
      .page-layout {
        grid-template-columns: 1fr;
      }

      .toc {
        display: none;
      }

      .hero-title {
        font-size: 2rem;
      }

      .hero-install {
        flex-direction: column;
        gap: calc(var(--spacing) * 2);
      }
    }
  </style>
</head>
<body>

  <nav>
    <div class="nav-container">
      <a href="index.html" class="nav-logo">
        <div class="nav-logo-icon">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3v11.25A2.25 2.25 0 006 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0118 16.5h-2.25m-7.5 0h7.5m-7.5 0l-1 3m8.5-3l1 3m0 0l.5 1.5m-.5-1.5h-9.5m0 0l-.5 1.5M9 11.25v1.5M12 9v3.75m3-6v6" />
          </svg>
        </div>
        etwfe
      </a>
      <ul class="nav-links">
        <li><a href="#getting-started">Getting Started</a></li>
        <li><a href="#examples">Examples</a></li>
        <li><a href="#api">API Reference</a></li>
        <li><a href="https://github.com/armandkapllani/etwfe" target="_blank" class="nav-btn">
          <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" style="width:16px;height:16px;margin-right:4px;">
            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
          </svg>
          GitHub
        </a></li>
      </ul>
    </div>
  </nav>

  <div class="container">
    
    <!-- Hero -->
    <section class="hero">
      <div class="hero-badge">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" style="width:14px;height:14px;">
          <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
        </svg>
        Python Package
      </div>
      <h1 class="hero-title">etwfe</h1>
      <p class="hero-subtitle">
        Extended Two-Way Fixed Effects estimator for Python. Implementation of Wooldridge (2021, 2023) 
        methodology for difference-in-differences with staggered treatment adoption and heterogeneous effects.
      </p>
      <div class="hero-badges">
        <a href="https://pypi.org/project/etwfe/" target="_blank">
          <img src="https://img.shields.io/pypi/v/etwfe?color=blue&label=PyPI" alt="PyPI">
        </a>
        <img src="https://img.shields.io/badge/python-3.10+-blue.svg" alt="Python 3.10+">
        <a href="https://github.com/armandkapllani/etwfe" target="_blank">
          <img src="https://img.shields.io/github/license/armandkapllani/etwfe" alt="License">
        </a>
      </div>
      <div class="hero-install">
        <code><span class="dollar">$</span> pip install etwfe</code>
        <button class="copy-btn" onclick="copyToClipboard('pip install etwfe', this)">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
          </svg>
          Copy
        </button>
      </div>
      <div class="hero-links">
        <a href="https://github.com/armandkapllani/etwfe" target="_blank" class="btn btn-primary">
          <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
          </svg>
          View on GitHub
        </a>
        <a href="https://pypi.org/project/etwfe/" target="_blank" class="btn btn-secondary">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
          </svg>
          PyPI Package
        </a>
      </div>
    </section>

    <!-- Main Content -->
    <div class="page-layout">
      
      <!-- Table of Contents -->
      <aside class="toc">
        <h3 class="toc-title">On This Page</h3>
        <ul class="toc-list">
          <li><a href="#getting-started">Getting Started</a></li>
          <li><a href="#features">Features</a></li>
          <li><a href="#examples">Examples</a>
            <ul class="toc-sub">
              <li><a href="#basic-model">Basic Model</a></li>
              <li><a href="#event-study">Event Study</a></li>
              <li><a href="#by-cohort">By Cohort</a></li>
              <li><a href="#by-calendar">By Calendar</a></li>
              <li><a href="#unit-fe">Unit Fixed Effects</a></li>
              <li><a href="#poisson">Poisson Model</a></li>
              <li><a href="#heterogeneous">Heterogeneous Effects</a></li>
              <li><a href="#plotting">Plotting</a></li>
            </ul>
          </li>
          <li><a href="#api">API Reference</a></li>
          <li><a href="#references">References</a></li>
        </ul>
      </aside>

      <!-- Content -->
      <main class="content">

        <!-- Getting Started -->
        <section id="getting-started" class="section">
          <h2 class="section-title">Getting Started</h2>
          <p class="section-intro">
            The <code>etwfe</code> package provides a Python implementation of the Extended Two-Way Fixed Effects 
            methodology developed by Wooldridge (2021, 2023). This approach properly handles heterogeneous treatment 
            effects in difference-in-differences settings with staggered treatment adoption.
          </p>

          <div class="subsection">
            <h3 class="subsection-title">Installation</h3>
            <div class="code-block">
              <div class="code-header">
                <span class="code-lang">Terminal</span>
              </div>
              <pre><code>pip install etwfe</code></pre>
            </div>
            <p class="description">
              For optional dependencies (Poisson, probit models):
            </p>
            <div class="code-block">
              <div class="code-header">
                <span class="code-lang">Terminal</span>
              </div>
              <pre><code>pip install etwfe[full]</code></pre>
            </div>
          </div>

          <div class="subsection">
            <h3 class="subsection-title">Quick Start</h3>
            <div class="code-block">
              <div class="code-header">
                <span class="code-lang">Python</span>
                <button class="code-copy" onclick="copyCode(this)">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                  </svg>
                  Copy
                </button>
              </div>
              <pre><code><span class="kw">from</span> etwfe <span class="kw">import</span> etwfe

<span class="cm"># Fit model</span>
model = <span class="fn">etwfe</span>(
    fml=<span class="str">"outcome ~ controls"</span>,
    tvar=<span class="str">"year"</span>,
    gvar=<span class="str">"first_treat"</span>,
    data=df,
    ivar=<span class="str">"unit_id"</span>
)

<span class="cm"># Get treatment effects</span>
model.<span class="fn">emfx</span>(type=<span class="str">"event"</span>)
model.<span class="fn">plot</span>(type=<span class="str">"event"</span>)</code></pre>
            </div>
          </div>
        </section>

        <!-- Features -->
        <section id="features" class="section">
          <h2 class="section-title">Features</h2>
          <div class="features-grid">
            <div class="feature-card">
              <div class="feature-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3v11.25A2.25 2.25 0 006 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0118 16.5h-2.25m-7.5 0h7.5m-7.5 0l-1 3m8.5-3l1 3m0 0l.5 1.5m-.5-1.5h-9.5m0 0l-.5 1.5M9 11.25v1.5M12 9v3.75m3-6v6" />
                </svg>
              </div>
              <h4 class="feature-title">Heterogeneous Effects</h4>
              <p class="feature-desc">Properly handles treatment effect heterogeneity across cohorts and time.</p>
            </div>
            <div class="feature-card">
              <div class="feature-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 14.25v2.25m3-4.5v4.5m3-6.75v6.75m3-9v9M6 20.25h12A2.25 2.25 0 0020.25 18V6A2.25 2.25 0 0018 3.75H6A2.25 2.25 0 003.75 6v12A2.25 2.25 0 006 20.25z" />
                </svg>
              </div>
              <h4 class="feature-title">Event Studies</h4>
              <p class="feature-desc">Generate dynamic treatment effects with pre-treatment periods.</p>
            </div>
            <div class="feature-card">
              <div class="feature-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23.693L5 14.5m14.8.8l1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0112 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5" />
                </svg>
              </div>
              <h4 class="feature-title">GLM Support</h4>
              <p class="feature-desc">Poisson, logit, probit for count and binary outcomes.</p>
            </div>
            <div class="feature-card">
              <div class="feature-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z" />
                </svg>
              </div>
              <h4 class="feature-title">High Performance</h4>
              <p class="feature-desc">Data compression for datasets with millions of rows.</p>
            </div>
          </div>
        </section>

        <!-- Examples -->
        <section id="examples" class="section">
          <h2 class="section-title">Examples</h2>
          <p class="section-intro">
            The following examples use the <code>mpdta</code> dataset from the R <code>did</code> package, 
            which contains county-level employment data with staggered treatment adoption.
          </p>

          <!-- Load Data -->
          <div id="load-data" class="subsection">
            <h3 class="subsection-title">
              <span class="step-badge">0</span>
              Load Example Data
            </h3>
            <div class="code-block">
              <div class="code-header">
                <span class="code-lang">Python</span>
                <button class="code-copy" onclick="copyCode(this)">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                  </svg>
                  Copy
                </button>
              </div>
              <pre><code><span class="kw">import</span> pandas <span class="kw">as</span> pd
<span class="kw">import</span> pyreadr

<span class="cm"># Load mpdta dataset (county employment data)</span>
url = <span class="str">"https://github.com/bcallaway11/did/raw/master/data/mpdta.rda"</span>
pyreadr.<span class="fn">download_file</span>(url, <span class="str">"mpdta.rda"</span>)
mpdta = pyreadr.<span class="fn">read_r</span>(<span class="str">"mpdta.rda"</span>)[<span class="str">"mpdta"</span>]

<span class="cm"># Prepare columns</span>
mpdta[<span class="str">"first_treat"</span>] = mpdta[<span class="str">"first.treat"</span>].<span class="fn">astype</span>(<span class="cls">int</span>)
mpdta[<span class="str">"year"</span>] = mpdta[<span class="str">"year"</span>].<span class="fn">astype</span>(<span class="cls">int</span>)
mpdta[<span class="str">"countyreal"</span>] = mpdta[<span class="str">"countyreal"</span>].<span class="fn">astype</span>(<span class="cls">int</span>)

<span class="fn">print</span>(mpdta.<span class="fn">head</span>())</code></pre>
            </div>
            <div class="output-block">
              <div class="output-header">Output</div>
              <div class="output-content">   year  countyreal      lpop     lemp  first_treat
0  2003        8001  5.896761  5.46154         2007
1  2004        8001  5.896761  5.56068         2007
2  2005        8001  5.896761  5.65249         2007
3  2006        8001  5.896761  5.64439         2007
4  2007        8001  5.896761  5.56068         2007</div>
            </div>
          </div>

          <!-- Basic Model -->
          <div id="basic-model" class="subsection">
            <h3 class="subsection-title">
              <span class="step-badge">1</span>
              Basic Model - Simple ATT
            </h3>
            <p class="description">
              Fit an ETWFE model and compute the overall average treatment effect on the treated (ATT). 
              Use <code>cgroup="notyet"</code> to include not-yet-treated units as controls.
            </p>
            <div class="code-block">
              <div class="code-header">
                <span class="code-lang">Python</span>
                <button class="code-copy" onclick="copyCode(this)">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                  </svg>
                  Copy
                </button>
              </div>
              <pre><code><span class="kw">from</span> etwfe <span class="kw">import</span> etwfe

<span class="cm"># Fit ETWFE model</span>
mod = <span class="fn">etwfe</span>(
    fml=<span class="str">"lemp ~ lpop"</span>,              <span class="cm"># log employment ~ log population</span>
    tvar=<span class="str">"year"</span>,                     <span class="cm"># time variable</span>
    gvar=<span class="str">"first_treat"</span>,              <span class="cm"># treatment cohort</span>
    data=mpdta,
    cgroup=<span class="str">"notyet"</span>,                 <span class="cm"># not-yet-treated as controls</span>
    vcov={<span class="str">"CRV1"</span>: <span class="str">"countyreal"</span>}      <span class="cm"># cluster SEs by county</span>
)

<span class="cm"># Overall ATT</span>
att = mod.<span class="fn">emfx</span>(type=<span class="str">"simple"</span>)
<span class="fn">print</span>(att)</code></pre>
            </div>
            <div class="output-block">
              <div class="output-header">Output</div>
              <table class="output-table">
                <thead>
                  <tr>
                    <th>_Dtreat</th>
                    <th class="num">estimate</th>
                    <th class="num">std.error</th>
                    <th class="num">conf.low</th>
                    <th class="num">conf.high</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>1.0</td>
                    <td class="num">-0.0506</td>
                    <td class="num">0.0131</td>
                    <td class="num">-0.0763</td>
                    <td class="num">-0.0249</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="info-box">
              <p>The ATT estimate of <strong>-0.051</strong> indicates that treatment reduced log employment by about 5.1%.</p>
            </div>
          </div>

          <!-- Event Study -->
          <div id="event-study" class="subsection">
            <h3 class="subsection-title">
              <span class="step-badge">2</span>
              Event Study
            </h3>
            <p class="description">
              Compute treatment effects by event time (periods relative to treatment). 
              Event time 0 is the first period of treatment.
            </p>
            <div class="code-block">
              <div class="code-header">
                <span class="code-lang">Python</span>
                <button class="code-copy" onclick="copyCode(this)">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                  </svg>
                  Copy
                </button>
              </div>
              <pre><code><span class="cm"># Event study</span>
event = mod.<span class="fn">emfx</span>(type=<span class="str">"event"</span>)
<span class="fn">print</span>(event)</code></pre>
            </div>
            <div class="output-block">
              <div class="output-header">Output</div>
              <table class="output-table">
                <thead>
                  <tr>
                    <th class="num">event</th>
                    <th class="num">estimate</th>
                    <th class="num">std.error</th>
                    <th class="num">conf.low</th>
                    <th class="num">conf.high</th>
                  </tr>
                </thead>
                <tbody>
                  <tr><td class="num">0</td><td class="num">-0.0332</td><td class="num">0.0134</td><td class="num">-0.0595</td><td class="num">-0.0069</td></tr>
                  <tr><td class="num">1</td><td class="num">-0.0573</td><td class="num">0.0172</td><td class="num">-0.0910</td><td class="num">-0.0236</td></tr>
                  <tr><td class="num">2</td><td class="num">-0.1379</td><td class="num">0.0305</td><td class="num">-0.1977</td><td class="num">-0.0781</td></tr>
                  <tr><td class="num">3</td><td class="num">-0.1095</td><td class="num">0.0340</td><td class="num">-0.1761</td><td class="num">-0.0429</td></tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Pre-treatment -->
          <div id="pre-treatment" class="subsection">
            <h3 class="subsection-title">
              <span class="step-badge">3</span>
              Pre-Treatment Periods (Parallel Trends)
            </h3>
            <p class="description">
              Include pre-treatment periods to test the parallel trends assumption. 
              Use <code>cgroup="never"</code> and <code>post_only=False</code>.
            </p>
            <div class="code-block">
              <div class="code-header">
                <span class="code-lang">Python</span>
                <button class="code-copy" onclick="copyCode(this)">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                  </svg>
                  Copy
                </button>
              </div>
              <pre><code><span class="cm"># Model with never-treated control group</span>
mod_never = <span class="fn">etwfe</span>(
    fml=<span class="str">"lemp ~ lpop"</span>,
    tvar=<span class="str">"year"</span>,
    gvar=<span class="str">"first_treat"</span>,
    data=mpdta,
    cgroup=<span class="str">"never"</span>,                 <span class="cm"># never-treated only</span>
    vcov={<span class="str">"CRV1"</span>: <span class="str">"countyreal"</span>}
)

<span class="cm"># Include pre-treatment periods</span>
event_pre = mod_never.<span class="fn">emfx</span>(type=<span class="str">"event"</span>, post_only=<span class="kw">False</span>)
<span class="fn">print</span>(event_pre)</code></pre>
            </div>
            <div class="output-block">
              <div class="output-header">Output</div>
              <table class="output-table">
                <thead>
                  <tr>
                    <th class="num">event</th>
                    <th class="num">estimate</th>
                    <th class="num">std.error</th>
                    <th class="num">conf.low</th>
                    <th class="num">conf.high</th>
                  </tr>
                </thead>
                <tbody>
                  <tr><td class="num">-4</td><td class="num">0.007</td><td class="num">0.024</td><td class="num">-0.040</td><td class="num">0.054</td></tr>
                  <tr><td class="num">-3</td><td class="num">0.028</td><td class="num">0.019</td><td class="num">-0.009</td><td class="num">0.065</td></tr>
                  <tr><td class="num">-2</td><td class="num">0.023</td><td class="num">0.015</td><td class="num">-0.006</td><td class="num">0.052</td></tr>
                  <tr><td class="num">-1</td><td class="num">0.000</td><td class="num">—</td><td class="num">—</td><td class="num">—</td></tr>
                  <tr><td class="num">0</td><td class="num">-0.021</td><td class="num">0.013</td><td class="num">-0.046</td><td class="num">0.004</td></tr>
                  <tr><td class="num">1</td><td class="num">-0.053</td><td class="num">0.017</td><td class="num">-0.086</td><td class="num">-0.020</td></tr>
                  <tr><td class="num">2</td><td class="num">-0.141</td><td class="num">0.031</td><td class="num">-0.202</td><td class="num">-0.080</td></tr>
                  <tr><td class="num">3</td><td class="num">-0.108</td><td class="num">0.034</td><td class="num">-0.175</td><td class="num">-0.041</td></tr>
                </tbody>
              </table>
            </div>
            <div class="info-box">
              <p>Pre-treatment effects (event &lt; 0) are close to zero, supporting the parallel trends assumption.</p>
            </div>
          </div>

          <!-- By Cohort -->
          <div id="by-cohort" class="subsection">
            <h3 class="subsection-title">
              <span class="step-badge">4</span>
              Effects by Treatment Cohort
            </h3>
            <div class="code-block">
              <div class="code-header">
                <span class="code-lang">Python</span>
                <button class="code-copy" onclick="copyCode(this)">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                  </svg>
                  Copy
                </button>
              </div>
              <pre><code><span class="cm"># ATT by treatment cohort</span>
by_cohort = mod.<span class="fn">emfx</span>(type=<span class="str">"group"</span>)
<span class="fn">print</span>(by_cohort)</code></pre>
            </div>
            <div class="output-block">
              <div class="output-header">Output</div>
              <table class="output-table">
                <thead>
                  <tr>
                    <th class="num">first_treat</th>
                    <th class="num">estimate</th>
                    <th class="num">std.error</th>
                    <th class="num">conf.low</th>
                    <th class="num">conf.high</th>
                  </tr>
                </thead>
                <tbody>
                  <tr><td class="num">2004</td><td class="num">-0.0797</td><td class="num">0.0253</td><td class="num">-0.1293</td><td class="num">-0.0301</td></tr>
                  <tr><td class="num">2006</td><td class="num">-0.0229</td><td class="num">0.0185</td><td class="num">-0.0592</td><td class="num">0.0134</td></tr>
                  <tr><td class="num">2007</td><td class="num">-0.0461</td><td class="num">0.0168</td><td class="num">-0.0790</td><td class="num">-0.0132</td></tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- By Calendar -->
          <div id="by-calendar" class="subsection">
            <h3 class="subsection-title">
              <span class="step-badge">5</span>
              Effects by Calendar Time
            </h3>
            <div class="code-block">
              <div class="code-header">
                <span class="code-lang">Python</span>
                <button class="code-copy" onclick="copyCode(this)">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                  </svg>
                  Copy
                </button>
              </div>
              <pre><code><span class="cm"># ATT by calendar time</span>
by_time = mod.<span class="fn">emfx</span>(type=<span class="str">"calendar"</span>)
<span class="fn">print</span>(by_time)</code></pre>
            </div>
            <div class="output-block">
              <div class="output-header">Output</div>
              <table class="output-table">
                <thead>
                  <tr>
                    <th class="num">year</th>
                    <th class="num">estimate</th>
                    <th class="num">std.error</th>
                    <th class="num">conf.low</th>
                    <th class="num">conf.high</th>
                  </tr>
                </thead>
                <tbody>
                  <tr><td class="num">2004</td><td class="num">-0.0211</td><td class="num">0.0218</td><td class="num">-0.0638</td><td class="num">0.0216</td></tr>
                  <tr><td class="num">2005</td><td class="num">-0.0822</td><td class="num">0.0277</td><td class="num">-0.1365</td><td class="num">-0.0279</td></tr>
                  <tr><td class="num">2006</td><td class="num">-0.0378</td><td class="num">0.0173</td><td class="num">-0.0717</td><td class="num">-0.0039</td></tr>
                  <tr><td class="num">2007</td><td class="num">-0.0461</td><td class="num">0.0168</td><td class="num">-0.0790</td><td class="num">-0.0132</td></tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Unit FE -->
          <div id="unit-fe" class="subsection">
            <h3 class="subsection-title">
              <span class="step-badge">6</span>
              Unit Fixed Effects
            </h3>
            <p class="description">
              Add unit-level fixed effects using the <code>ivar</code> parameter.
            </p>
            <div class="code-block">
              <div class="code-header">
                <span class="code-lang">Python</span>
                <button class="code-copy" onclick="copyCode(this)">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                  </svg>
                  Copy
                </button>
              </div>
              <pre><code><span class="cm"># Model with unit fixed effects</span>
mod_fe = <span class="fn">etwfe</span>(
    fml=<span class="str">"lemp ~ lpop"</span>,
    tvar=<span class="str">"year"</span>,
    gvar=<span class="str">"first_treat"</span>,
    data=mpdta,
    ivar=<span class="str">"countyreal"</span>,              <span class="cm"># unit identifier</span>
    cgroup=<span class="str">"notyet"</span>,
    vcov={<span class="str">"CRV1"</span>: <span class="str">"countyreal"</span>}
)

event_fe = mod_fe.<span class="fn">emfx</span>(type=<span class="str">"event"</span>)
<span class="fn">print</span>(event_fe)</code></pre>
            </div>
            <div class="output-block">
              <div class="output-header">Output</div>
              <table class="output-table">
                <thead>
                  <tr>
                    <th class="num">event</th>
                    <th class="num">estimate</th>
                    <th class="num">std.error</th>
                    <th class="num">conf.low</th>
                    <th class="num">conf.high</th>
                  </tr>
                </thead>
                <tbody>
                  <tr><td class="num">0</td><td class="num">-0.033</td><td class="num">0.013</td><td class="num">-0.059</td><td class="num">-0.007</td></tr>
                  <tr><td class="num">1</td><td class="num">-0.057</td><td class="num">0.017</td><td class="num">-0.091</td><td class="num">-0.024</td></tr>
                  <tr><td class="num">2</td><td class="num">-0.138</td><td class="num">0.030</td><td class="num">-0.197</td><td class="num">-0.079</td></tr>
                  <tr><td class="num">3</td><td class="num">-0.110</td><td class="num">0.034</td><td class="num">-0.176</td><td class="num">-0.043</td></tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Poisson -->
          <div id="poisson" class="subsection">
            <h3 class="subsection-title">
              <span class="step-badge">7</span>
              Poisson Model (Count Data)
            </h3>
            <p class="description">
              For count outcomes, use <code>family="poisson"</code>. Results are on the response scale by default.
            </p>
            <div class="code-block">
              <div class="code-header">
                <span class="code-lang">Python</span>
                <button class="code-copy" onclick="copyCode(this)">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                  </svg>
                  Copy
                </button>
              </div>
              <pre><code><span class="kw">import</span> numpy <span class="kw">as</span> np

<span class="cm"># Create count outcome</span>
mpdta_p = mpdta.<span class="fn">copy</span>()
mpdta_p[<span class="str">"emp"</span>] = np.<span class="fn">exp</span>(mpdta_p[<span class="str">"lemp"</span>])  <span class="cm"># convert to counts</span>

<span class="cm"># Poisson model</span>
mod_pois = <span class="fn">etwfe</span>(
    fml=<span class="str">"emp ~ lpop"</span>,
    tvar=<span class="str">"year"</span>,
    gvar=<span class="str">"first_treat"</span>,
    data=mpdta_p,
    family=<span class="str">"poisson"</span>,
    vcov={<span class="str">"CRV1"</span>: <span class="str">"countyreal"</span>}
)

event_pois = mod_pois.<span class="fn">emfx</span>(type=<span class="str">"event"</span>, predict=<span class="str">"response"</span>)
<span class="fn">print</span>(event_pois)</code></pre>
            </div>
            <div class="output-block">
              <div class="output-header">Output</div>
              <table class="output-table">
                <thead>
                  <tr>
                    <th class="num">event</th>
                    <th class="num">estimate</th>
                    <th class="num">std.error</th>
                    <th class="num">conf.low</th>
                    <th class="num">conf.high</th>
                  </tr>
                </thead>
                <tbody>
                  <tr><td class="num">0</td><td class="num">-25.35</td><td class="num">15.9</td><td class="num">-56.5</td><td class="num">5.79</td></tr>
                  <tr><td class="num">1</td><td class="num">1.09</td><td class="num">40.3</td><td class="num">-77.9</td><td class="num">80.07</td></tr>
                  <tr><td class="num">2</td><td class="num">-75.12</td><td class="num">23.2</td><td class="num">-120.5</td><td class="num">-29.74</td></tr>
                  <tr><td class="num">3</td><td class="num">-101.82</td><td class="num">27.1</td><td class="num">-154.9</td><td class="num">-48.73</td></tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Heterogeneous -->
          <div id="heterogeneous" class="subsection">
            <h3 class="subsection-title">
              <span class="step-badge">8</span>
              Heterogeneous Treatment Effects
            </h3>
            <p class="description">
              Use <code>xvar</code> to estimate treatment effect heterogeneity across subgroups.
            </p>
            <div class="code-block">
              <div class="code-header">
                <span class="code-lang">Python</span>
                <button class="code-copy" onclick="copyCode(this)">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                  </svg>
                  Copy
                </button>
              </div>
              <pre><code><span class="cm"># Create heterogeneity variable (Great Lakes states)</span>
gls_fips = [<span class="num">17</span>, <span class="num">18</span>, <span class="num">26</span>, <span class="num">27</span>, <span class="num">36</span>, <span class="num">39</span>, <span class="num">42</span>, <span class="num">55</span>]
mpdta[<span class="str">"gls"</span>] = mpdta[<span class="str">"countyreal"</span>].<span class="fn">astype</span>(<span class="cls">str</span>).<span class="fn">str</span>[:<span class="num">2</span>].<span class="fn">astype</span>(<span class="cls">int</span>).<span class="fn">isin</span>(gls_fips)

<span class="cm"># Model with heterogeneous effects</span>
mod_het = <span class="fn">etwfe</span>(
    fml=<span class="str">"lemp ~ lpop"</span>,
    tvar=<span class="str">"year"</span>,
    gvar=<span class="str">"first_treat"</span>,
    data=mpdta,
    xvar=<span class="str">"gls"</span>,                      <span class="cm"># heterogeneity variable</span>
    cgroup=<span class="str">"never"</span>,
    vcov={<span class="str">"CRV1"</span>: <span class="str">"countyreal"</span>}
)

<span class="cm"># ATT by subgroup</span>
att_het = mod_het.<span class="fn">emfx</span>(type=<span class="str">"simple"</span>, by_xvar=<span class="kw">True</span>)
<span class="fn">print</span>(att_het)</code></pre>
            </div>
            <div class="output-block">
              <div class="output-header">Output</div>
              <table class="output-table">
                <thead>
                  <tr>
                    <th>gls</th>
                    <th class="num">estimate</th>
                    <th class="num">std.error</th>
                    <th class="num">conf.low</th>
                    <th class="num">conf.high</th>
                  </tr>
                </thead>
                <tbody>
                  <tr><td>False</td><td class="num">-0.0519</td><td class="num">0.0156</td><td class="num">-0.0825</td><td class="num">-0.0213</td></tr>
                  <tr><td>True</td><td class="num">-0.0394</td><td class="num">0.0203</td><td class="num">-0.0792</td><td class="num">0.0004</td></tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Plotting -->
          <div id="plotting" class="subsection">
            <h3 class="subsection-title">
              <span class="step-badge">9</span>
              Visualization
            </h3>
            <div class="code-block">
              <div class="code-header">
                <span class="code-lang">Python</span>
                <button class="code-copy" onclick="copyCode(this)">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                  </svg>
                  Copy
                </button>
              </div>
              <pre><code><span class="kw">import</span> matplotlib.pyplot <span class="kw">as</span> plt

<span class="cm"># Event study plot</span>
fig, axes = plt.<span class="fn">subplots</span>(<span class="num">1</span>, <span class="num">3</span>, figsize=(<span class="num">14</span>, <span class="num">5</span>))

mod.<span class="fn">plot</span>(type=<span class="str">"event"</span>, ax=axes[<span class="num">0</span>], title=<span class="str">"Event Study"</span>)
mod.<span class="fn">plot</span>(type=<span class="str">"group"</span>, ax=axes[<span class="num">1</span>], title=<span class="str">"By Cohort"</span>)
mod.<span class="fn">plot</span>(type=<span class="str">"calendar"</span>, ax=axes[<span class="num">2</span>], title=<span class="str">"By Calendar Time"</span>)

plt.<span class="fn">tight_layout</span>()
plt.<span class="fn">show</span>()</code></pre>
            </div>
          </div>
        </section>

        <!-- API Reference -->
        <section id="api" class="section">
          <h2 class="section-title">API Reference</h2>

          <div class="subsection">
            <h3 class="subsection-title">etwfe() Parameters</h3>
            <table class="param-table">
              <thead>
                <tr>
                  <th>Parameter</th>
                  <th>Type</th>
                  <th>Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="param-name">fml</td>
                  <td class="param-type">str</td>
                  <td>Formula: <code>"outcome ~ controls"</code> or <code>"outcome ~ 0"</code></td>
                </tr>
                <tr>
                  <td class="param-name">tvar</td>
                  <td class="param-type">str</td>
                  <td>Name of time period variable</td>
                </tr>
                <tr>
                  <td class="param-name">gvar</td>
                  <td class="param-type">str</td>
                  <td>Name of treatment cohort variable (first period treated)</td>
                </tr>
                <tr>
                  <td class="param-name">data</td>
                  <td class="param-type">DataFrame</td>
                  <td>Panel data</td>
                </tr>
                <tr>
                  <td class="param-name">ivar</td>
                  <td class="param-type">str, optional</td>
                  <td>Unit identifier for unit fixed effects</td>
                </tr>
                <tr>
                  <td class="param-name">xvar</td>
                  <td class="param-type">str, optional</td>
                  <td>Variable for heterogeneous treatment effects</td>
                </tr>
                <tr>
                  <td class="param-name">cgroup</td>
                  <td class="param-type">str</td>
                  <td><code>"notyet"</code> or <code>"never"</code></td>
                </tr>
                <tr>
                  <td class="param-name">family</td>
                  <td class="param-type">str, optional</td>
                  <td><code>"poisson"</code>, <code>"logit"</code>, or <code>"probit"</code></td>
                </tr>
                <tr>
                  <td class="param-name">vcov</td>
                  <td class="param-type">dict, optional</td>
                  <td>Variance-covariance: <code>{"CRV1": "cluster_var"}</code></td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="subsection">
            <h3 class="subsection-title">emfx() Parameters</h3>
            <table class="param-table">
              <thead>
                <tr>
                  <th>Parameter</th>
                  <th>Type</th>
                  <th>Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="param-name">type</td>
                  <td class="param-type">str</td>
                  <td><code>"simple"</code>, <code>"event"</code>, <code>"group"</code>, <code>"calendar"</code></td>
                </tr>
                <tr>
                  <td class="param-name">by_xvar</td>
                  <td class="param-type">bool</td>
                  <td>Compute effects by xvar groups</td>
                </tr>
                <tr>
                  <td class="param-name">post_only</td>
                  <td class="param-type">bool</td>
                  <td>Include only post-treatment (default: True)</td>
                </tr>
                <tr>
                  <td class="param-name">predict</td>
                  <td class="param-type">str</td>
                  <td><code>"response"</code> or <code>"link"</code> for GLM</td>
                </tr>
                <tr>
                  <td class="param-name">window</td>
                  <td class="param-type">int, optional</td>
                  <td>Restrict event window to ±window periods</td>
                </tr>
                <tr>
                  <td class="param-name">compress</td>
                  <td class="param-type">bool</td>
                  <td>Compress data for large datasets</td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Quick Reference -->
          <div class="quick-ref">
            <h3 class="quick-ref-title">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" />
              </svg>
              Quick Reference
            </h3>
            <div class="quick-ref-grid">
              <div class="quick-ref-item">
                <h4>Marginal Effects</h4>
                <code>emfx(type="simple")</code><p>Overall ATT</p>
                <code>emfx(type="event")</code><p>By event time</p>
                <code>emfx(type="group")</code><p>By cohort</p>
                <code>emfx(type="calendar")</code><p>By time</p>
              </div>
              <div class="quick-ref-item">
                <h4>Control Groups</h4>
                <code>cgroup="notyet"</code><p>Not-yet-treated</p>
                <code>cgroup="never"</code><p>Never-treated only</p>
              </div>
              <div class="quick-ref-item">
                <h4>GLM Families</h4>
                <code>family="poisson"</code><p>Count data</p>
                <code>family="logit"</code><p>Binary (logistic)</p>
                <code>family="probit"</code><p>Binary (probit)</p>
              </div>
              <div class="quick-ref-item">
                <h4>Plotting</h4>
                <code>plot(type="event")</code><p>Event study</p>
                <code>plot(type="group")</code><p>By cohort</p>
                <code>plot(type="calendar")</code><p>By time</p>
              </div>
            </div>
          </div>
        </section>

        <!-- References -->
        <section id="references" class="section">
          <h2 class="section-title">References</h2>
          <ul style="list-style: none; padding: 0;">
            <li style="margin-bottom: 16px;">
              <strong>Wooldridge, J. M. (2021).</strong> "Two-Way Fixed Effects, the Two-Way Mundlak Regression, 
              and Difference-in-Differences Estimators." <em>Working Paper</em>.
            </li>
            <li style="margin-bottom: 16px;">
              <strong>Wooldridge, J. M. (2023).</strong> "Simple Approaches to Nonlinear Difference-in-Differences 
              with Panel Data." <em>The Econometrics Journal</em>.
            </li>
          </ul>
        </section>

      </main>
    </div>

    <footer>
      <p class="footer-text">
        Created by <a href="index.html">Armand Kapllani</a> · 
        <a href="https://github.com/armandkapllani/etwfe">GitHub</a> · 
        <a href="https://pypi.org/project/etwfe/">PyPI</a>
      </p>
    </footer>

  </div>

  <script>
    function copyToClipboard(text, button) {
      navigator.clipboard.writeText(text).then(() => {
        const original = button.innerHTML;
        button.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" style="width:14px;height:14px;"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" /></svg> Copied!';
        setTimeout(() => { button.innerHTML = original; }, 2000);
      });
    }

    function copyCode(button) {
      const code = button.closest('.code-block').querySelector('code').innerText;
      copyToClipboard(code, button);
    }

    // Highlight active TOC item on scroll
    const sections = document.querySelectorAll('.section, .subsection');
    const tocLinks = document.querySelectorAll('.toc-list a');

    window.addEventListener('scroll', () => {
      let current = '';
      sections.forEach(section => {
        const sectionTop = section.offsetTop;
        if (scrollY >= sectionTop - 100) {
          current = section.getAttribute('id');
        }
      });

      tocLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === '#' + current) {
          link.classList.add('active');
        }
      });
    });
  </script>

</body>
</html>
